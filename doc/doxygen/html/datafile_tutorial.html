<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crazy Eddie&#39;s GUI System: 3 - The Beginners Guide to Data Files and Defaults Initialisation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Crazy Eddie&#39;s GUI System
   &#160;<span id="projectnumber">${CEGUI_VERSION}</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('datafile_tutorial.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">3 - The Beginners Guide to Data Files and Defaults Initialisation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#datafile_tutorial_intro">Introduction</a></li>
<li class="level1"><a href="#datafile_tutorial_allxml">Font, Imageset, LookNFeel, Scheme, XSD?  It&#39;s all XML!</a><ul><li class="level2"><a href="#datafile_tutorial_validation">Schema Validation with Xerces-C++</a></li>
</ul>
</li>
<li class="level1"><a href="#datafile_tutorial_files">The Data Files</a><ul><li class="level2"><a href="#datafile_tutorial_imageset">Imageset</a></li>
<li class="level2"><a href="#datafile_tutorial_font">Font</a></li>
<li class="level2"><a href="#datafile_tutorial_looknfeel">LookNFeel</a></li>
<li class="level2"><a href="#datafile_tutorial_scheme">Scheme</a></li>
<li class="level2"><a href="#datafile_tutorial_layout">Layout</a></li>
<li class="level2"><a href="#datafile_tutorial_config">Config</a></li>
</ul>
</li>
<li class="level1"><a href="#datafile_tutorial_load_basics">Loading the Basic Files</a></li>
<li class="level1"><a href="#datafile_tutorial_setup_defaults">System Defaults Initialisation</a></li>
<li class="level1"><a href="#datafile_tutorial_conclusion">Conclusion</a></li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Paul D Turner</dd></dl>
<p>It is assumed that prior to reading this tutorial you are already familiar with the concepts surrounding CEGUI's ResourceProvider and have correctly initialised your Renderer and the CEGUI System objects. If you've not yet covered these topics, it is highly recommended that you read <a class="el" href="rendering_tutorial.html">1 - The Beginners Guide to Initialising CEGUI</a> and <a class="el" href="resprov_tutorial.html">2 - The Beginners Guide to resource loading with ResourceProviders</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_intro"></a>
Introduction</h1>
<p>CEGUI uses a variety of different data files and - at least initially - it's possible there may be some confusion as to what exactly all these files are and how they relate to one another. In addition, there are some system wide defaults that - while not technically <em>required</em> to be set - you will almost certainly want to set for the majority of your applications using CEGUI.</p>
<p>This tutorial will serve as an introduction to these topics in order that you can be more comfortable with the data files and with setting the basic default options used with CEGUI.</p>
<p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_allxml"></a>
Font, Imageset, LookNFeel, Scheme, XSD?  It's all XML!</h1>
<p>With the exception of graphical image files, script language files and loadable modules (.dll /. so files, etc), all the data files used with CEGUI are XML based. This actually leads us to the first potential obstacle that you may run into: the .xsd schema files.</p>
<h2><a class="anchor" id="datafile_tutorial_validation"></a>
Schema Validation with Xerces-C++</h2>
<p>Although the Expat based XML parser module is the default choice for parsing the XML data files, CEGUI also supports a parser based upon the Xerces-C++ library from the Apache Software Foundation (see <a href="http://xerces.apache.org/xerces-c">http://xerces.apache.org/xerces-c</a>).</p>
<p>The advantage of using this particular parser is that it provides <em>schema validation</em>. For the uninitiated, schema validation is a means by which the incoming XML data can be checked to ensure it is well formed and that it contains the required information. In order for this validation to work, some additional files - unsurprisingly known as schema files (not to be confused with CEGUI's own <em>scheme files</em> described below) - are required. The schema files used to validate the XML for CEGUI can be found in the <code>datafiles/xml_schema/</code> directory within the CEGUI distribution, and have the .xsd file extension.</p>
<p>The main thing you need to know for now is that when using the Xerces-C++ based XML parser, these .xsd files must be available to the ResourceProvider system; this is probably best achieved by setting up a resource group to the directory containing the schema files and setting that group as the default to be used by CEGUI::XercesParser when loading schema files (the specifics on how to do this are covered in <a class="el" href="resprov_tutorial.html">2 - The Beginners Guide to resource loading with ResourceProviders</a>).</p>
<p>The CEGUI developers recommend using Xerces-C++ during development and testing, and then switching to Expat (or one of the other lightweight parsers) for final deployment &ndash; this way you minimise the chances of bad XML files slipping into your product.</p>
<p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_files"></a>
The Data Files</h1>
<p>As previously mentioned, the majority of the data files in CEGUI are XML based. Rather than using a generic '.xml' file extension, the data files are usually named according to what the files actually represent; for example .imageset for an Imageset and .font for a Font (this naming convention is not, however, a requirement of the system - you are free to name the files any way you like). There now follows a very brief overview of the purpose each file type.</p>
<h2><a class="anchor" id="datafile_tutorial_imageset"></a>
Imageset</h2>
<p>An Imageset is a collection of named regions upon some source surface, such as an image file or texture. In CEGUI terminology, each of these named regions is an Image and is the basic level of imagery used by CEGUI. By modifying the source image file or texture content, or by modifying the areas of the defined regions within the Imageset file, you can easily change the appearance of what gets drawn by CEGUI.</p>
<p>For a complete description of imageset files, please see <a class="el" href="xml_imageset.html">Imageset XML files.</a></p>
<h2><a class="anchor" id="datafile_tutorial_font"></a>
Font</h2>
<p>A Font file, unsurprisingly, defines a font for use in CEGUI. There are at present two types of font which may be defined:</p><ul>
<li>FreeTypeFont: This is a font based upon a standard font file (such as a true-type '.ttf' font). A FreeTypeFont is specified via the attribute <code>Type="FreeType"</code> in the .font XML file.</li>
<li>PixmapFont: This type of font is based upon an Imageset which defines Images for the font glyphs, and is best thought of as a bitmapped font. A PixmapFont is specified via the attribute <code>Type="Pixmap"</code> in the .font XML file.</li>
</ul>
<p>For a complete description of font files, please see <a class="el" href="xml_font.html">Font XML files.</a></p>
<h2><a class="anchor" id="datafile_tutorial_looknfeel"></a>
LookNFeel</h2>
<p>LookNFeel files form a major part of CEGUI's skinning system. Each will contain one or more WidgetLook definitions that describe to the system various imagery and child widget components, their locations, additional property values and so on an so forth. These WidgetLook specifications are later bound to concrete elements within the system to form what are ultimately represented as the windows and widgets in CEGUI.</p>
<p>For a complete description of looknfeel files (and other skinning related material), please see <a class="el" href="fal_man.html">Falagard skinning system for CEGUI</a></p>
<h2><a class="anchor" id="datafile_tutorial_scheme"></a>
Scheme</h2>
<p>A Scheme file is a largely means to group other data files and resources together, and to define some of their interactions, and form a single point to load what might be considered a 'skin' for CEGUI's windows and widgets. A Scheme can contain one or more of the following:</p><ul>
<li><code>Imageset</code> Specifies an Imageset file to be loaded as part of the scheme.</li>
<li><code>Font</code> Specifies a Font file to be loaded as part of the scheme.</li>
<li><code>LookNFeel</code> Specifies a LookNFeel file to be loaded as part of the scheme.</li>
<li><code>WindowSet</code> Specifies the name of a loadable module, and a set of widget names contained within that module that you wish to register with the system (if no names are listed, all available types in the module are registered). This is a convenient way of adding additional core widget types to CEGUI (especially if the module is provided by a third party).</li>
<li><code>WindowRendererSet</code> Specifies the name of a loadable module, and a set of window renderer names contained within that module that you wish to register with the system (if no names are listed, all available types in the module are registered). A 'Window Renderer' is an object that can control rendering for some base window type(s), all the window renderer objects supplied with CEGUI perform rendering by making use of the 'Falagard' skinning system (though this is not a strict requirement).</li>
<li><code>WindowAlias</code> Provides a means to refer to a window / widget type by alternative names, it can also be used to 'hide' an already registered widget type with another widget type (so that other widget type gets used instead).</li>
<li><code>FalagardMapping</code> Creates a new usable window type by linking a concrete window/widget type, a window renderer type, a widget look definition and &ndash; optionally &ndash; a render effect.</li>
</ul>
<p>For a complete description of scheme files, please see <a class="el" href="xml_scheme.html">Scheme XML files.</a></p>
<h2><a class="anchor" id="datafile_tutorial_layout"></a>
Layout</h2>
<p>A layout file contains an XML representation of a window layout. Each nested 'Window' element defines a window or widget to be created, the 'Property' elements define the desired settings and property values for each window defined.</p>
<p>For a complete description of layout files, please see <a class="el" href="xml_layout.html">Layout XML files.</a></p>
<h2><a class="anchor" id="datafile_tutorial_config"></a>
Config</h2>
<p>CEGUI's config file support allows you to specify all the system defaults, initial resources to be loaded, as well as initialisation and termination script files to execute (when using a ScriptModule), without writing a line of C++ code beyond that which creates the Renderer and System objects.</p>
<p>For a complete description of config files, please see <a class="el" href="xml_config.html">CEGUI Configuration XML files.</a></p>
<p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_load_basics"></a>
Loading the Basic Files</h1>
<p>In order to get things up and running you need to load in some files. The typical set of files needed are:</p><ul>
<li>Imageset</li>
<li>Font</li>
<li>LookNFeel</li>
<li>Scheme</li>
</ul>
<p>The good thing about the Scheme file - as you may have gathered from the above description - is that it can automatically load the other files for you. For the purposes of this tutorial, we will load a scheme file and a font file - it is assumed the scheme automatically loads an Imageset and LookNFeel for us. Loading the scheme and font files is done as follows: </p><div class="fragment"><div class="line"><span class="comment">// create (load) the TaharezLook scheme file</span></div><div class="line"><span class="comment">// (this auto-loads the TaharezLook looknfeel and imageset files)</span></div><div class="line">CEGUI::SchemeManager::getSingleton().createFromFile( <span class="stringliteral">&quot;TaharezLook.scheme&quot;</span> );</div><div class="line"></div><div class="line"><span class="comment">// create (load) a font.</span></div><div class="line"><span class="comment">// The first font loaded automatically becomes the default font, but note</span></div><div class="line"><span class="comment">// that the scheme might have already loaded a font, so there may already</span></div><div class="line"><span class="comment">// be a default set - if we want the &quot;DejaVuSans-10&quot; font to definitely</span></div><div class="line"><span class="comment">// be the default, we should set the default explicitly afterwards.</span></div><div class="line">CEGUI::FontManager::getSingleton().createFromFile( <span class="stringliteral">&quot;DejaVuSans-10.font&quot;</span> );</div></div><!-- fragment --><p>In the above code (and in the CEGUI samples) it is assumed that the resource group locations and the default groups have all been set up as described in <a class="el" href="resprov_tutorial.html">2 - The Beginners Guide to resource loading with ResourceProviders</a>.</p>
<p>The <code>TaharezLook.scheme</code> file used as an example in this tutorial, as well as the corresponding imageset, font and looknfeel files (including <code>DejaVuSans-10.font</code>), are shipped with CEGUI's source package, SDK and other forms of distribution by default. Depending on how you installed CEGUI, these files might therefore already be available on your system (e.g., in <code>/usr/share/cegui/datafiles</code> on a Linux system). If you downloaded the source package or got CEGUI from the repository, then the files should be in the folder <code>datafiles/</code> of your CEGUI folder, which is the default folder and the structure that the CEGUI SampleBrowser uses on Windows for the samples.</p>
<p>If you do not have the files, download the CEGUI source tarball or zip corresponding to your version of CEGUI from the download page (<a href="http://cegui.org.uk/download">http://cegui.org.uk/download</a>) and extract it. Inside it you will find a directory <code>datafiles/</code> whose inner structure corresponds to the structure recommended in the previous tutorial: <a class="el" href="resprov_tutorial.html">2 - The Beginners Guide to resource loading with ResourceProviders</a>. Copy the files from there into the directories you set up (or simply copy the entire <code>datafiles/</code>directory if you are lazy). If you don’t do this, CEGUI will complain about these files being not found and will crash your program with an exception.</p>
<p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_setup_defaults"></a>
System Defaults Initialisation</h1>
<p>Finally, you need to specify some default options for the System. This ensures that the system always has a font and mouse cursor available for when a window or widget specifies no preference of its own.</p>
<p>The FontManager automatically sets the first loaded font as the system default. If this is not the default font you require, or if you can not guarantee the order fonts are loaded, you should set the default explicitly, as in this code: </p><div class="fragment"><div class="line">CEGUI::System::getSingleton().getDefaultGUIContext().setDefaultFont( <span class="stringliteral">&quot;DejaVuSans-10&quot;</span> );</div></div><!-- fragment --><p>Another default object you'll normally set is a mouse cursor. This ensures that when you move the mouse over any element that does not set a cursor of its own, the cursor does not disappear. The code to set the default mouse cursor for the initial, default GUIContext is as follows: </p><dl class="section note"><dt>Note</dt><dd>This uses the TaharezLook imageset which was loaded as part of the TaharezLook scheme we loaded above.</dd></dl>
<div class="fragment"><div class="line">CEGUI::System::getSingleton().getDefaultGUIContext().</div><div class="line">    getMouseCursor().setDefaultImage( <span class="stringliteral">&quot;TaharezLook/MouseArrow&quot;</span> );</div></div><!-- fragment --><p>Finally, if you intend to use tool tips, you should specify the type of the ToolTip based widget that you want used for that purpose. It is actually possible to set this on a per-window basis, though this is not normally required, and is beyond the scope of this introductory tutorial. The code to set the default tool tip window type for the initial, default GUIContext looks like this: </p><div class="fragment"><div class="line">CEGUI::System::getSingleton().getDefaultGUIContext().</div><div class="line">    setDefaultTooltipType( <span class="stringliteral">&quot;TaharezLook/Tooltip&quot;</span> );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="datafile_tutorial_conclusion"></a>
Conclusion</h1>
<p>Here we have discovered the very basics of what the various data files used by CEGUI are, how they are loaded, and the minimal initialisation needed for CEGUI applications. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
